<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(2) > li > ul > li > a, .site-nav > ul:nth-of-type(2) > li > ul > li > ul > li > a, .site-nav > ul:nth-of-type(2) > li > ul > li > ul > li > ul > li > a, .site-nav > ul:nth-of-type(2) > li > ul > li > ul > li > ul > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul:nth-of-type(2) > li > ul > li > ul > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul:not(:nth-of-type(2)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(2) > li > ul > li:nth-child(2) > ul > li:nth-child(1) > ul > li:nth-child(2) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(2) > li > ul > li:nth-child(2) > button svg, .site-nav > ul:nth-of-type(2) > li > ul > li:nth-child(2) > ul > li:nth-child(1) > button svg, .site-nav > ul:nth-of-type(2) > li > ul > li:nth-child(2) > ul > li:nth-child(1) > ul > li:nth-child(2) > button svg, .site-nav > ul:nth-of-type(2) > li > ul > li:nth-child(2) > ul > li:nth-child(1) > ul > li:nth-child(2) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(2) > li > ul > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul:nth-of-type(2) > li > ul > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul:nth-of-type(2) > li > ul > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul:nth-of-type(2) > li > ul > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>v1.1.1/How To Use Gluten | Apache Gluten incubating</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="v1.1.1/How To Use Gluten" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="There are some common questions about developing, debugging and testing been asked again and again. In order to help the developers to contribute to Gluten as soon as possible, we collected these frequently asked questions, and organized them in the form of Q&amp;A. It’s convenient for the developers to check and learn." /> <meta property="og:description" content="There are some common questions about developing, debugging and testing been asked again and again. In order to help the developers to contribute to Gluten as soon as possible, we collected these frequently asked questions, and organized them in the form of Q&amp;A. It’s convenient for the developers to check and learn." /> <link rel="canonical" href="https://gluten.apache.org/archives/v1.1.1/developers/howto/" /> <meta property="og:url" content="https://gluten.apache.org/archives/v1.1.1/developers/howto/" /> <meta property="og:site_name" content="Apache Gluten incubating" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-11-21T21:28:21+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="v1.1.1/How To Use Gluten" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-11-21T21:28:21+00:00","datePublished":"2025-11-21T21:28:21+00:00","description":"There are some common questions about developing, debugging and testing been asked again and again. In order to help the developers to contribute to Gluten as soon as possible, we collected these frequently asked questions, and organized them in the form of Q&amp;A. It’s convenient for the developers to check and learn.","headline":"v1.1.1/How To Use Gluten","mainEntityOfPage":{"@type":"WebPage","@id":"https://gluten.apache.org/archives/v1.1.1/developers/howto/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://gluten.apache.org/assets/images/gluten-logo-blue.png"}},"url":"https://gluten.apache.org/archives/v1.1.1/developers/howto/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Apache Gluten incubating"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/downloads/" class="nav-list-link">Downloads</a></li><li class="nav-list-item"><a href="/blog/" class="nav-list-link">Blog</a></li><li class="nav-list-item"><a href="/references/" class="nav-list-link">Gluten References</a></li><li class="nav-list-item"><a href="/poweredby/" class="nav-list-link">Powered by Gluten</a></li><li class="nav-list-item"><a href="/contributing/" class="nav-list-link">Contributing to Gluten</a></li><li class="nav-list-item"><a href="/community/" class="nav-list-link">Community</a></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection Documentations" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">Documentations</div> <ul class="nav-list"><li class="nav-list-item"><a href="/docs/latest.html" class="nav-list-link">Documentation(Latest)</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Archives category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/" class="nav-list-link">Archives</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in v1.1.1 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.1.1/" class="nav-list-link">v1.1.1</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in v1.1.1/Documentation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.1.1/docs/" class="nav-list-link">v1.1.1/Documentation</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in v1.1.1/Velox Backend category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.1.1/docs/velox/" class="nav-list-link">v1.1.1/Velox Backend</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.1.1/docs/velox/getting-started/" class="nav-list-link">v1.1.1/Getting-Started with Velox Backend</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/docs/velox/build_parameters/" class="nav-list-link">v1.1.1/Build Parameters for Velox Backend</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/docs/velox/s3/" class="nav-list-link">v1.1.1/Using S3 with Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/docs/velox/gcs/" class="nav-list-link">v1.1.1/Using GCS with Gluten</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in v1.1.1/ClickHouse Backend category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.1.1/docs/clickhouse/" class="nav-list-link">v1.1.1/ClickHouse Backend</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.1.1/docs/clickhouse/getting-started/" class="nav-list-link">v1.1.1/Getting Started with ClickHouse Backend</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in v1.1.1/Developers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.1.1/developers/" class="nav-list-link">v1.1.1/Developers</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.1.1/developers/newto/" class="nav-list-link">v1.1.1/New To Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/howto/" class="nav-list-link">v1.1.1/How To Use Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/microbenchmark/" class="nav-list-link">v1.1.1/Micro Benchmarks for Velox Backend</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/cpp_code_style/" class="nav-list-link">v1.1.1/CPP Code Style</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/velox_function_development/" class="nav-list-link">v1.1.1/Velox Function Development</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/docker_ubuntu/" class="nav-list-link">v1.1.1/Docker script for Ubuntu 22.04/20.04</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/docker_centos8" class="nav-list-link">v1.1.1/Docker script for CentOS 8</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/docker_centos7/" class="nav-list-link">v1.1.1/Docker script for CentOS 7</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/substrait/" class="nav-list-link">v1.1.1/Substrait Modifications</a></li><li class="nav-list-item"><a href="/archives/v1.1.1/developers/howtorelease/" class="nav-list-link">v1.1.1/How To Release</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in v1.2.1 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.2.1/" class="nav-list-link">v1.2.1</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Documentations(v1.2.1) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.2.1/docs/" class="nav-list-link">Documentations(v1.2.1)</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting-Started(v1.2.1) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.2.1/docs/getting-started/" class="nav-list-link">Getting-Started(v1.2.1)</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.2.1/docs/getting-started/velox-backend/" class="nav-list-link">Getting Start with Velox Backend(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/getting-started/clickhouse-backend/" class="nav-list-link">Getting start with ClickHouse Backend(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/getting-started/build-guide/" class="nav-list-link">Build Parameters for Velox Backend(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/getting-started/s3/" class="nav-list-link">Using S3 with Gluten(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/getting-started/gcs/" class="nav-list-link">Using GCS with Gluten(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/getting-started/abfs/" class="nav-list-link">Using ABFS with Gluten(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/getting-started/localcache/" class="nav-list-link">Velox Local Caching(v1.2.1)</a></li></ul></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/configuration/" class="nav-list-link">Configuration(v1.2.1)</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Developers(v1.2.1) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.2.1/docs/developers/" class="nav-list-link">Developers(v1.2.1)</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/how-to-use/" class="nav-list-link">How To Use Gluten(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/new-to/" class="nav-list-link">New To Gluten(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/microbenchmarks/" class="nav-list-link">Micro Benchmarks for Velox Backend(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/cpp-code-style/" class="nav-list-link">CPP Code Style(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/velox-function-dev/" class="nav-list-link">Velox Function Development(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/docker-ubuntu/" class="nav-list-link">Docker script for Ubuntu 22.04/20.04(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/docker-centos7/" class="nav-list-link">Docker script for CentOS 7(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/docker-centos8/" class="nav-list-link">Docker script for CentOS 8(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/substrait/" class="nav-list-link">Substrait Modifications(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/how-to-release/" class="nav-list-link">How To Release(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/developers/how-to-security-scan/" class="nav-list-link">How To Scan Security issues(v1.2.1)</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Velox Backend(v1.2.1) category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.2.1/docs/velox-backend/" class="nav-list-link">Velox Backend(v1.2.1)</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.2.1/docs/velox-backend/support/" class="nav-list-link">Supported Operators & Functions(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/velox-backend/limitations/" class="nav-list-link">Limitations(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/velox-backend/troubleshooting/" class="nav-list-link">Troubleshooting(v1.2.1)</a></li><li class="nav-list-item"><a href="/archives/v1.2.1/docs/velox-backend/udf/" class="nav-list-link">Velox UDF(v1.2.1)</a></li></ul></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in v1.3.0 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.3.0/" class="nav-list-link">v1.3.0</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting-Started category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.3.0/getting-started" class="nav-list-link">Getting-Started</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.3.0/getting-started/velox-backend/" class="nav-list-link">Getting Start with Velox Backend</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/getting-started/clickhouse-backend/" class="nav-list-link">Getting start with ClickHouse Backend</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/getting-started/build-guide/" class="nav-list-link">Build Parameters for Velox Backend</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/getting-started/s3/" class="nav-list-link">Using S3 with Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/getting-started/gcs/" class="nav-list-link">Using GCS with Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/getting-started/abfs/" class="nav-list-link">Using ABFS with Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/getting-started/localcache/" class="nav-list-link">Velox Local Caching</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Velox Backend category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.3.0/velox-backend" class="nav-list-link">Velox Backend</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.3.0/velox-backend/support/" class="nav-list-link">Supported Operators & Functions</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/velox-backend/limitations/" class="nav-list-link">Limitations</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/velox-backend/troubleshooting/" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/velox-backend/udf/" class="nav-list-link">Velox UDF</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Developers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/archives/v1.3.0/developers" class="nav-list-link">Developers</a><ul class="nav-list"><li class="nav-list-item"><a href="/archives/v1.3.0/developers/how-to-use/" class="nav-list-link">How To Use Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/new-to/" class="nav-list-link">New To Gluten</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/microbenchmarks/" class="nav-list-link">Micro Benchmarks for Velox Backend</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/velox-function-dev/" class="nav-list-link">Velox Function Development</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/docker-ubuntu/" class="nav-list-link">Docker script for Ubuntu 22.04/20.04</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/docker-centos7/" class="nav-list-link">Docker script for CentOS 7</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/docker-centos8/" class="nav-list-link">Docker script for CentOS 8</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/substrait/" class="nav-list-link">Substrait Modifications</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/how-to-security-scan/" class="nav-list-link">How To Scan Security issues</a></li></ul></li><li class="nav-list-item"><a href="/archives/v1.3.0/configuration" class="nav-list-link">Configuration</a></li><li class="nav-list-item"><a href="/archives/v1.3.0/developers/cpp-code-style/" class="nav-list-link">CPP Code Style</a></li></ul></li></ul></li></ul> </li> </ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Apache Gluten incubating" aria-label="Search Apache Gluten incubating" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <style> /* Style The Dropdown Button */ .dropbtn { background-color: #0000ff80; color: white; padding: 22px; width: 100%; font-size: 14px; border: none; cursor: pointer; } /* The container <div> - needed to position the dropdown content */ .dropdown { position: relative; display: inline-block; } /* Dropdown Content (Hidden by Default) */ .dropdown-content { display: none; position: absolute; background-color: #f9f9f9; min-width: 160px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1; } /* Links inside the dropdown */ .dropdown-content a { color: black; padding: 12px 14px; text-decoration: none; display: block; } /* Change color of dropdown links on hover */ .dropdown-content a:hover {background-color: #f1f1f1} /* Show the dropdown menu on hover */ .dropdown:hover .dropdown-content { display: block; } /* Change the background color of the dropdown button when the dropdown content is shown */ .dropdown:hover .dropbtn { background-color: #0000ff; } </style> <!-- Collect the nav links, forms, and other content for toggling --> <div class="dropdown" id="apache-navbar" style="float:left;"> <button class="dropbtn">ASF</button> <div class="dropdown-content"> <a class="dropdown-item" href="https://www.apache.org/">Foundation</a> <a class="dropdown-item" href="https://www.apache.org/events/current-event.html">Event</a> <a class="dropdown-item" href="https://www.apache.org/licenses/">License</a> <a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a> <a class="dropdown-item" href="https://www.apache.org/security/">Security</a> <a class="dropdown-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a> <a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a> </div> </div><!-- /.navbar-collapse --> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/apache/incubator-gluten" class="site-button" target="_blank" rel="noopener noreferrer" > Apache Gluten Github </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/archives/">Archives</a></li> <li class="breadcrumb-nav-list-item"><a href="/archives/v1.1.1/">v1.1.1</a></li> <li class="breadcrumb-nav-list-item"><a href="/archives/v1.1.1/developers/">v1.1.1/Developers</a></li> <li class="breadcrumb-nav-list-item"><span>v1.1.1/How To Use Gluten</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <p>There are some common questions about developing, debugging and testing been asked again and again. In order to help the developers to contribute to Gluten as soon as possible, we collected these frequently asked questions, and organized them in the form of Q&amp;A. It’s convenient for the developers to check and learn.</p> <p>when you encountered a new problem and then resolved it, please add a new item to this document if you think it may be helpful to the other developers.</p> <p>We use <code class="language-plaintext highlighter-rouge">gluten_home</code> to represent the home directory of Gluten in this document.</p> <h1 id="how-to-understand-the-key-work-of-gluten"> <a href="#how-to-understand-the-key-work-of-gluten" class="anchor-heading" aria-labelledby="how-to-understand-the-key-work-of-gluten"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to understand the key work of Gluten? </h1> <p>The Gluten worked as the role of bridge, it’s a middle layer between the Spark and the native execution library.</p> <p>The Gluten is responsibility for validating whether the operators of the Spark plan can be executed by the native engine or not. If yes, the Gluten transforms Spark plan to Substrait plan, and then send the Substrait plan to the native engine.</p> <p>The Gluten codes consist of two parts: the C++ codes and the Java/Scala codes.</p> <ol> <li>All C++ codes are placed under the directory of <code class="language-plaintext highlighter-rouge">gluten_home/cpp</code>, the Java/Scala codes are placed under several directories, such as <code class="language-plaintext highlighter-rouge">gluten_home/gluten-core</code> <code class="language-plaintext highlighter-rouge">gluten_home/gluten-data</code> <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox</code>.</li> <li>The Java/Scala codes are responsibility for validating and transforming the execution plan. Source data should also be provided, the source data may come from files or other forms such as networks.</li> <li>The C++ codes take the Substrait plan and the source data as inputs and transform the Substrait plan to the corresponding backend plan. If the backend is Velox, the Substrait plan will be transformed to the Velox plan, and then be executed.</li> </ol> <p>JNI is a programming technology of invoking C++ from Java. All JNI interfaces are defined in the file <code class="language-plaintext highlighter-rouge">JniWrapper.cc</code> under the directory <code class="language-plaintext highlighter-rouge">jni</code>.</p> <h1 id="how-to-debug-in-gluten"> <a href="#how-to-debug-in-gluten" class="anchor-heading" aria-labelledby="how-to-debug-in-gluten"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to debug in Gluten? </h1> <h2 id="1-how-to-debug-c"> <a href="#1-how-to-debug-c" class="anchor-heading" aria-labelledby="1-how-to-debug-c"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1 How to debug C++ </h2> <p>If you don’t concern about the Scala/Java codes and just want to debug the C++ codes executed in native engine, you may debug the C++ via benchmarks with GDB.</p> <p>To debug C++, you have to generate the example files, the example files consist of:</p> <ul> <li>A file contained Substrait plan in JSON format</li> <li>One or more input data files in Parquet format</li> </ul> <p>You can generate the example files by the following steps:</p> <ol> <li>build Velox and Gluten CPP <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gluten_home/dev/builddeps-veloxbe.sh --build_tests=ON --build_benchmarks=ON --build_type=Debug
</code></pre></div> </div> <ul> <li>Compiling with <code class="language-plaintext highlighter-rouge">--build_type=Debug</code> is good for debugging.</li> <li>The executable file <code class="language-plaintext highlighter-rouge">generic_benchmark</code> will be generated under the directory of <code class="language-plaintext highlighter-rouge">gluten_home/cpp/build/velox/benchmarks/</code>.</li> </ul> </li> <li>build Gluten and generate the example files <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd gluten_home
mvn clean package -Pspark-3.2 -Pbackends-velox -Prss
mvn test -Pspark-3.2 -Pbackends-velox -Prss -pl backends-velox -am -DtagsToInclude="io.glutenproject.tags.GenerateExample" -Dtest=none -DfailIfNoTests=false -Darrow.version=11.0.0-gluten -Dexec.skip
</code></pre></div> </div> <ul> <li>After the above operations, the examples files are generated under <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox</code></li> <li>You can check it by the command <code class="language-plaintext highlighter-rouge">tree gluten_home/backends-velox/generated-native-benchmark/</code></li> <li>You may replace <code class="language-plaintext highlighter-rouge">-Pspark-3.2</code> with <code class="language-plaintext highlighter-rouge">-Pspark-3.3</code> if your spark’s version is 3.3 <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tree gluten_home/backends-velox/generated-native-benchmark/
gluten_home/backends-velox/generated-native-benchmark/
├── example.json
├── example_lineitem
│   ├── part-00000-3ec19189-d20e-4240-85ae-88631d46b612-c000.snappy.parquet
│   └── _SUCCESS
└── example_orders
 ├── part-00000-1e66fb98-4dd6-47a6-8679-8625dbc437ee-c000.snappy.parquet
 └── _SUCCESS
</code></pre></div> </div> </li> </ul> </li> <li>now, run benchmarks with GDB <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd gluten_home/cpp/build/velox/benchmarks/
gdb generic_benchmark
</code></pre></div> </div> <ul> <li>When GDB load <code class="language-plaintext highlighter-rouge">generic_benchmark</code> successfully, you can set <code class="language-plaintext highlighter-rouge">breakpoint</code> on the <code class="language-plaintext highlighter-rouge">main</code> function with command <code class="language-plaintext highlighter-rouge">b main</code>, and then run with command <code class="language-plaintext highlighter-rouge">r</code>, then the process <code class="language-plaintext highlighter-rouge">generic_benchmark</code> will start and stop at the <code class="language-plaintext highlighter-rouge">main</code> function.</li> <li>You can check the variables’ state with command <code class="language-plaintext highlighter-rouge">p variable_name</code>, or execute the program line by line with command <code class="language-plaintext highlighter-rouge">n</code>, or step-in the function been called with command <code class="language-plaintext highlighter-rouge">s</code>.</li> <li>Actually, you can debug <code class="language-plaintext highlighter-rouge">generic_benchmark</code> with any gdb commands as debugging normal C++ program, because the <code class="language-plaintext highlighter-rouge">generic_benchmark</code> is a pure C++ executable file in fact.</li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">gdb-tui</code> is a valuable feature and is worth trying. You can get more help from the online docs. <a href="https://sourceware.org/gdb/onlinedocs/gdb/TUI.html">gdb-tui</a></p> </li> <li>you can start <code class="language-plaintext highlighter-rouge">generic_benchmark</code> with specific JSON plan and input files <ul> <li>If you omit them, the <code class="language-plaintext highlighter-rouge">example.json, example_lineitem + example_orders</code> under the directory of <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox/generated-native-benchmark</code> will be used as default.</li> <li>You can also edit the file <code class="language-plaintext highlighter-rouge">example.json</code> to custom the Substrait plan or specify the inputs files placed in the other directory.</li> </ul> </li> <li>get more detail information about benchmarks from <a href="./MicroBenchmarks.md">MicroBenchmarks</a></li> </ol> <h2 id="2-how-to-debug-plan-validation-process"> <a href="#2-how-to-debug-plan-validation-process" class="anchor-heading" aria-labelledby="2-how-to-debug-plan-validation-process"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2 How to debug plan validation process </h2> <p>Gluten will validate generated plan before execute it, and validation usually happens in native side, so we provide a utility to help debug validation process in native side.</p> <ol> <li>Run query with conf <code class="language-plaintext highlighter-rouge">spark.gluten.sql.debug=true</code>, and you will find generated plan be printed in stderr with json format, save it as <code class="language-plaintext highlighter-rouge">plan.json</code> for example.</li> <li>Compile cpp part with <code class="language-plaintext highlighter-rouge">--build_benchmarks=ON</code>, then check <code class="language-plaintext highlighter-rouge">plan_validator_util</code> executable file in <code class="language-plaintext highlighter-rouge">gluten_home/cpp/build/velox/benchmarks/</code>.</li> <li>Run or debug with <code class="language-plaintext highlighter-rouge">./plan_validator_util &lt;path&gt;/plan.json</code></li> </ol> <h2 id="3-how-to-debug-javascala"> <a href="#3-how-to-debug-javascala" class="anchor-heading" aria-labelledby="3-how-to-debug-javascala"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3 How to debug Java/Scala </h2> <p>wait to add</p> <h2 id="4-how-to-debug-with-core-dump"> <a href="#4-how-to-debug-with-core-dump" class="anchor-heading" aria-labelledby="4-how-to-debug-with-core-dump"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4 How to debug with core-dump </h2> <p>wait to complete</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd the_directory_of_core_file_generated
gdb gluten_home/cpp/build/releases/libgluten.so 'core-Executor task l-2000883-1671542526'

</code></pre></div></div> <ul> <li>the <code class="language-plaintext highlighter-rouge">core-Executor task l-2000883-1671542526</code> represents the core file name.</li> </ul> <h1 id="how-to-run-tpc-h-on-velox-backend"> <a href="#how-to-run-tpc-h-on-velox-backend" class="anchor-heading" aria-labelledby="how-to-run-tpc-h-on-velox-backend"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to run TPC-H on Velox backend </h1> <p>Now, both Parquet and DWRF format files are supported, related scripts and files are under the directory of <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox/workload/tpch</code>. The file <code class="language-plaintext highlighter-rouge">README.md</code> under <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox/workload/tpch</code> offers some useful help but it’s still not enough and exact.</p> <p>One way of run TPC-H test is to run velox-be by workflow, you can refer to <a href="https://github.com/apache/incubator-gluten/blob/branch-1.1.1/.github/workflows/velox_be.yml#L90">velox_be.yml</a></p> <p>Here will explain how to run TPC-H on Velox backend with the Parquet file format.</p> <ol> <li>First step, prepare the datasets, you have two choices. <ul> <li>One way, generate Parquet datasets using the script under <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox/workload/tpch/gen_data/parquet_dataset</code>, You can get help from the above mentioned <code class="language-plaintext highlighter-rouge">README.md</code>.</li> <li>The other way, using the small dataset under <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox/src/test/resources/tpch-data-parquet-velox</code> directly, If you just want to make simple TPC-H testing, this dataset is a good choice.</li> </ul> </li> <li>Second step, run TPC-H on Velox backend testing. <ul> <li>Modify <code class="language-plaintext highlighter-rouge">gluten_home/backends-velox/workload/tpch/run_tpch/tpch_parquet.scala</code>.</li> </ul> <ul> <li>set <code class="language-plaintext highlighter-rouge">var parquet_file_path</code> to correct directory. If using the small dataset directly in the step one, then modify it as below <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> var parquet_file_path = "gluten_home/backends-velox/src/test/resources/tpch-data-parquet-velox"
</code></pre></div> </div> </li> <li>set <code class="language-plaintext highlighter-rouge">var gluten_root</code> to correct directory. If <code class="language-plaintext highlighter-rouge">gluten_home</code> is the directory of <code class="language-plaintext highlighter-rouge">/home/gluten</code>, then modify it as below <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> var gluten_root = "/home/gluten"
</code></pre></div> </div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - Modify `gluten_home/backends-velox/workload/tpch/run_tpch/tpch_parquet.sh`.
</code></pre></div> </div> </li> <li>Set <code class="language-plaintext highlighter-rouge">GLUTEN_JAR</code> correctly. Please refer to the section of <a href="https://gluten.apache.org/archives/v1.1.1/docs/velox/getting-started/#build-gluten-with-velox-backend">Build Gluten with Velox Backend</a></li> <li>Set <code class="language-plaintext highlighter-rouge">SPARK_HOME</code> correctly.</li> <li>Set the memory configurations appropriately. - Execute <code class="language-plaintext highlighter-rouge">tpch_parquet.sh</code> using the below command.</li> <li><code class="language-plaintext highlighter-rouge">cd gluten_home/backends-velox/workload/tpch/run_tpch/</code></li> <li><code class="language-plaintext highlighter-rouge">./tpch_parquet.sh</code></li> </ul> </li> </ol> <h1 id="how-to-run-tpc-ds"> <a href="#how-to-run-tpc-ds" class="anchor-heading" aria-labelledby="how-to-run-tpc-ds"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to run TPC-DS </h1> <p>wait to add</p> <h1 id="how-to-track-the-memory-exhaust-problem"> <a href="#how-to-track-the-memory-exhaust-problem" class="anchor-heading" aria-labelledby="how-to-track-the-memory-exhaust-problem"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to track the memory exhaust problem </h1> <p>When your gluten spark jobs failed because of OOM, you can track the memory allocation’s call stack by configuring <code class="language-plaintext highlighter-rouge">spark.gluten.backtrace.allocation = true</code>. The above configuration will use <code class="language-plaintext highlighter-rouge">BacktraceAllocationListener</code> wrapping from <code class="language-plaintext highlighter-rouge">SparkAllocationListener</code> to create <code class="language-plaintext highlighter-rouge">VeloxMemoryManager</code>.</p> <p><code class="language-plaintext highlighter-rouge">BacktraceAllocationListener</code> will check every allocation, if a single allocation bytes exceeds a fixed value or the accumulative allocation bytes exceeds 1/2/3…G, the call stack of memory allocation will be outputted to standard output, you can check the backtrace and get some valuable information about tracking the memory exhaust issues.</p> <p>You can also adjust the policy to decide when to backtrace, such as the fixed value.</p> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <a href="https://incubator.apache.org/"><img src="/assets/images/apache-incubator.svg" style="width:300px"></a> <p class="text-small text-grey-dk-100 mb-0">Copyright © 2024 The Apache Software Foundation, Licensed under the Apache License, Version 2.0. Apache Gluten, Gluten, Apache, the Apache feather logo, and the Apache Gluten project logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries. All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p> <p class="text-small text-grey-dk-100 mb-0">Apache Gluten is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p> <p class="text-small text-grey-dk-100 mb-0"><a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
